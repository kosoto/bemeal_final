CREATE TABLE ITEM(
   ITEM_SEQ INT PRIMARY KEY AUTO_INCREMENT,
   ITEM_NAME VARCHAR(30) NOT NULL,
   BRAND VARCHAR(20),
   CATEGORY VARCHAR(30),
   PRICE INT NOT NULL,
   SALE_PERCENT DOUBLE,
   EVENT BOOLEAN,
   NEW_ITEM BOOLEAN,
   EXPLAINS VARCHAR(200),
   CALORIE INT 
)DEFAULT CHARSET=UTF8;

CREATE TABLE MEMBER(
   MEMBER_ID VARCHAR(20) PRIMARY KEY,
   PASSWORD VARCHAR(20) NOT NULL,
   NAME VARCHAR(20) NOT NULL,
   AGE INT,
   SSN VARCHAR(14),
   GENDER VARCHAR(1),
   ADDRESS VARCHAR(255),
   E_MAIL VARCHAR(255),
   PHONE_NUM VARCHAR(30)
)DEFAULT CHARSET=UTF8;

CREATE TABLE PURCHASE (
	PURCHASE_SEQ INT PRIMARY KEY AUTO_INCREMENT,
	MEMBER_ID VARCHAR(20),
	TO_ID VARCHAR(20) DEFAULT ('탈퇴한 회원'),
	MASSAGE VARCHAR(255),
	FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER (MEMBER_ID) ON DELETE CASCADE,
	FOREIGN KEY (TO_ID) REFERENCES MEMBER (MEMBER_ID) ON DELETE SET DEFAULT
)DEFAULT CHARSET=UTF8;

CREATE TABLE TASTE(
	TASTE_SEQ INT PRIMARY KEY AUTO_INCREMENT,
	QUANTITY INT,
	DIR_NAME VARCHAR(50),
	GRADE DOUBLE,
	TASTE_DATE DATE NOT NULL DEFAULT (CURRENT_DATE),
	TASTE_TIME TIME NOT NULL DEFAULT (CURRENT_TIME),
	FLAG VARCHAR(10) NOT NULL,
	MEMBER_ID VARCHAR(20) NOT NULL,
	ITEM_SEQ INT NOT NULL,
	TAG_SEQ INT,
	PURCHASE_SEQ INT,
	FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER (MEMBER_ID) ON DELETE CASCADE,
	FOREIGN KEY (ITEM_SEQ) REFERENCES ITEM (ITEM_SEQ) ON DELETE CASCADE,
	FOREIGN KEY (PURCHASE_SEQ) REFERENCES PURCHASE (PURCHASE_SEQ)
)DEFAULT CHARSET=UTF8;

CREATE TABLE KEYWORD(
   KEYWORD_SEQ INT PRIMARY KEY AUTO_INCREMENT,
   KEYWORD VARCHAR(50) NOT NULL
)DEFAULT CHARSET=UTF8;

CREATE TABLE SEARCH(
   SEARCH_SEQ INT PRIMARY KEY AUTO_INCREMENT,
   SEARCH_DATE TIMESTAMP NOT NULL DEFAULT now(),
   MEMBER_ID VARCHAR(20) NOT NULL,
   KEYWORD_SEQ INT NOT NULL,   
   FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER (MEMBER_ID) ON DELETE CASCADE,
   FOREIGN KEY (KEYWORD_SEQ) REFERENCES KEYWORD (KEYWORD_SEQ) ON DELETE CASCADE
)DEFAULT CHARSET=UTF8;

CREATE TABLE BOARD(
   BOARD_SEQ INT PRIMARY KEY AUTO_INCREMENT,
   BOARD_NAME VARCHAR(20) NOT NULL
)DEFAULT CHARSET=UTF8;

CREATE TABLE ARTICLE(
   ARTICLE_SEQ INT PRIMARY KEY AUTO_INCREMENT,
   TITLE VARCHAR(255),
   CONTENT TEXT NULL,
   ARTICLE_DATE DATE NOT NULL DEFAULT (CURRENT_DATE),
   ARTICLE_TIME TIME NOT NULL DEFAULT (CURRENT_TIME),
   URL VARCHAR(255),
   BOARD_SEQ INT,
   MEMBER_ID VARCHAR(20),
   ITEM_SEQ INT,
   FOREIGN KEY (BOARD_SEQ) REFERENCES BOARD (BOARD_SEQ),
   FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER (MEMBER_ID) ON DELETE SET NULL,
   FOREIGN KEY (ITEM_SEQ) REFERENCES ITEM (ITEM_SEQ) ON DELETE SET NULL
)DEFAULT CHARSET=UTF8;

CREATE TABLE JUDGMENT(
   JUDGMENT_SEQ INT PRIMARY KEY AUTO_INCREMENT,
   FLAG VARCHAR(5) NOT NULL,
   ARTICLE_SEQ INT NOT NULL,
   FOREIGN KEY (ARTICLE_SEQ) REFERENCES ARTICLE (ARTICLE_SEQ) ON DELETE CASCADE
)DEFAULT CHARSET=UTF8;

CREATE TABLE IMAGE(
   IMG_SEQ INT PRIMARY KEY AUTO_INCREMENT,
   IMG VARCHAR(255) NOT NULL,
   ITEM_SEQ INT,
   FOREIGN KEY (ITEM_SEQ) REFERENCES ITEM (ITEM_SEQ) ON DELETE CASCADE,
   MEMBER_ID VARCHAR(20),
   FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER (MEMBER_ID) ON DELETE CASCADE,
   ARTICLE_SEQ INT,
   FOREIGN KEY (ARTICLE_SEQ) REFERENCES ARTICLE (ARTICLE_SEQ) ON DELETE CASCADE
)DEFAULT CHARSET=UTF8;

CREATE TABLE TAG(
   TAG_SEQ INT PRIMARY KEY AUTO_INCREMENT,
   TAG_FLAG VARCHAR(5) NOT NULL,
   TAG_NAME VARCHAR(20) NOT NULL
)DEFAULT CHARSET=UTF8;

CREATE TABLE TAG_ITEM(
	TAG_ITEM_SEQ INT PRIMARY KEY AUTO_INCREMENT,
	TAG_SEQ INT,
	ITEM_SEQ INT,
	FOREIGN KEY (TAG_SEQ) REFERENCES TAG (TAG_SEQ) ON DELETE CASCADE,
	FOREIGN KEY (ITEM_SEQ) REFERENCES ITEM (ITEM_SEQ) ON DELETE CASCADE
)DEFAULT CHARSET=UTF8;

